@{ ViewData["Title"] = "الصفحة الرئيسية"; }
@model DashboardViewModel
<!--begin::Card-->
<div class="card card-custom">
    <div class="card-header flex-wrap border-0 pt-6 pb-0">
        <div class="card-title">
            <h2 class="card-label">
                إحصائيات
            </h2>
        </div>
    </div>

    <div class="card-body">

        <div class="row">
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد المستخدمين</h1>
                    <h3> @Model.NoumberOfUsers</h3>
                </div>


            </div>
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد العقارات</h1>
                    <h3>@Model.NoumberOfRealEstate</h3>
                </div>

            </div>
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد التصنيفات</h1>
                    <h3> @Model.NoumberOfCategory</h3>
                </div>

            </div>
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد الإعلانات</h1>
                    <h3>@Model.NoumberOfAdvertisment</h3>
                </div>

            </div>

        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد العقود</h1>
                    <h3> @Model.NoumberOfContracts</h3>
                </div>


            </div>
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد المواقع</h1>
                    <h3>@Model.NoumberOfLocation</h3>
                </div>

            </div>
            <div class="col-md-3">
                <div class="alert alert-info">
                    <h1>عدد الزبائن</h1>
                    <h3> @Model.NoumberOfCustomer</h3>
                </div>

            </div>
        </div>

        <br />
        <hr />


        <div class="row">
            <div class="col-md-6 text-center">
                <h3>توزيع المستخدمين حسب النوع </h3>
                <canvas id="myUserChart" width="400" height="400"></canvas>
            </div>

            <div class="col-md-6 text-center">
                <h3>توزيع العقارات حسب النوع </h3>
                <canvas id="myRealEstateChart" width="400" height="400"></canvas>
            </div>
        </div>
        <br />

        <div class="row">
            <div class="col-md-6 text-center offset-3">
                <h3>توزيع العقود حسب النوع </h3>
                <canvas id="myContractChart" width="400" height="400"></canvas>
            </div>
        </div>
    </div>

</div>


@section Scripts{

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
    @*<script>*@
    @*$.ajax(
            {
                url: "/Home/GetUserChartData", success: function (result) {
                    console.log(result, 'Data');


                    // User Chart Data
                    var ctx = document.getElementById('myUserChart').getContext('2d');
                    var myUserChart = new Chart(ctx, {
                        type: 'pie',
                        data: {
                            //labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],

                            labels: ['Administrator', 'Customer', 'AdvertisementOwner'],
                            datasets: [{
                                label: '# of Votes',
                                data: [12, 19, 3],
                                backgroundColor: [
                                    //'rgba(255, 99, 132, 0.1)',
                                    //'rgba(54, 162, 235, 0.1)',
                                    //'rgba(255, 206, 86, 0.1)',
                                    //'rgba(75, 192, 192, 0.1)',
                                    //'rgba(153, 102, 255, 0.1)',
                                    //'rgba(255, 159, 64, 0.1)'
                                    'rgb(255, 99, 132)',
                                    'rgb(54, 162, 235)',
                                    'rgb(255, 206, 86)',


                                ],
                                borderColor: [
                                    //'rgba(255, 99, 132, 1)',
                                    //'rgba(54, 162, 235, 1)',
                                    //'rgba(255, 206, 86, 1)',
                                    //'rgba(75, 192, 192, 1)',
                                    //'rgba(153, 102, 255, 1)',
                                    //'rgba(255, 159, 64, 1)'
                                    'rgb(255, 99, 132)',
                                    'rgb(54, 162, 235)',
                                    'rgb(255, 206, 86)',

                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {

                        }
                    });

                    //// RealEstate Chart Data Data
                    //var ctx = document.getElementById('myRealEstateChart').getContext('2d');
                    //var myChart = new Chart(ctx, {
                    //    type: 'pie',
                    //    data: {
                    //        //labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                    //        labels: ['department', 'Villa', 'Comapny', 'ground', 'house'],
                    //        datasets: [{
                    //            label: '# of Votes',
                    //            data: [12, 19, 3],
                    //            backgroundColor: [
                    //                //'rgba(255, 99, 132, 0.1)',
                    //                //'rgba(54, 162, 235, 0.1)',
                    //                //'rgba(255, 206, 86, 0.1)',
                    //                //'rgba(75, 192, 192, 0.1)',
                    //                //'rgba(153, 102, 255, 0.1)',
                    //                //'rgba(255, 159, 64, 0.1)'
                    //                'rgb(255, 99, 132)',
                    //                'rgb(54, 162, 235)',
                    //                'rgb(255, 206, 86)',
                    //                'rgb(75, 192, 192)',
                    //                'rgb(153, 102, 255)',

                    //            ],
                    //            borderColor: [
                    //                //'rgba(255, 99, 132, 1)',
                    //                //'rgba(54, 162, 235, 1)',
                    //                //'rgba(255, 206, 86, 1)',
                    //                //'rgba(75, 192, 192, 1)',
                    //                //'rgba(153, 102, 255, 1)',
                    //                //'rgba(255, 159, 64, 1)'
                    //                'rgb(255, 99, 132)',
                    //                'rgb(54, 162, 235)',
                    //                'rgb(255, 206, 86)',
                    //                'rgba(75, 192, 192)',
                    //                'rgba(153, 102, 255)',
                    //            ],
                    //            borderWidth: 1
                    //        }]
                    //    },
                    //    options: {

                    //    }
                    //});

                    //// Contract Chart Data
                    //var ctx = document.getElementById('myContractChart').getContext('2d');
                    //var myChart = new Chart(ctx, {
                    //    type: 'pie',
                    //    data: {
                    //        //labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                    //        labels: ['rental', 'sale', 'buy'],
                    //        datasets: [{
                    //            label: '# of Votes',
                    //            data: [12, 19, 3],
                    //            backgroundColor: [
                    //                //'rgba(255, 99, 132, 0.1)',
                    //                //'rgba(54, 162, 235, 0.1)',
                    //                //'rgba(255, 206, 86, 0.1)',
                    //                //'rgba(75, 192, 192, 0.1)',
                    //                //'rgba(153, 102, 255, 0.1)',
                    //                //'rgba(255, 159, 64, 0.1)'
                    //                'rgb(255, 99, 132)',
                    //                'rgb(54, 162, 235)',
                    //                'rgb(255, 206, 86)',


                    //            ],
                    //            borderColor: [
                    //                //'rgba(255, 99, 132, 1)',
                    //                //'rgba(54, 162, 235, 1)',
                    //                //'rgba(255, 206, 86, 1)',
                    //                //'rgba(75, 192, 192, 1)',
                    //                //'rgba(153, 102, 255, 1)',
                    //                //'rgba(255, 159, 64, 1)'
                    //                'rgb(255, 99, 132)',
                    //                'rgb(54, 162, 235)',
                    //                'rgb(255, 206, 86)',

                    //            ],
                    //            borderWidth: 1
                    //        }]
                    //    },
                    //    options: {

                    //    }
                    //});





    </script>*@

        <script>

            var userTypeCanvas = document.getElementById('myUserChart').getContext('2d');
            var RealEstateTypeCanvas = document.getElementById('myRealEstateChart').getContext('2d');
            var ContractTypeCanvas = document.getElementById('myContractChart').getContext('2d');


            var myUserChartLabels = [];
            var myUserChartValues = [];
            var myUserChartColores = [];

            var myRealEstateChartLabels = [];
            var myRealEstateChartValues = [];
            var myRealEstateChartColores = [];

            var myContractChartLabels = [];
            var myContractChartValues = [];
            var myContractChartColores = [];

            $.ajax({
                url: "/Home/GetContractCharData", success: function (result) {
                    $(result).each(function (index) {
                        myContractChartLabels.push(result[index].key);
                        myContractChartValues.push(result[index].value);
                        myContractChartColores.push(result[index].color);
                    });
                    var ContractTypeChart = new Chart(ContractTypeCanvas, {
                        type: 'pie',
                        data: {
                            labels: myContractChartLabels,
                            datasets: [{
                                label: '# of Votes',
                                data: myContractChartValues,
                                backgroundColor: myContractChartColores
                            }]
                        },
                        options: {

                        }
                    });
                }
            });

            $.ajax({
                url: "/Home/GetUserRealEstateData", success: function (result) {
                    $(result).each(function (index) {
                        myRealEstateChartLabels.push(result[index].key);
                        myRealEstateChartValues.push(result[index].value);
                        myRealEstateChartColores.push(result[index].color);
                    });
                    var RealEstateTypeChart = new Chart(RealEstateTypeCanvas, {
                        type: 'pie',
                        data: {
                            labels: myRealEstateChartLabels,
                            datasets: [{
                                label: '# of Votes',
                                data: myRealEstateChartValues,
                                backgroundColor: myRealEstateChartColores
                            }]
                        },
                        options: {

                        }
                    });
                }
            });



        $.ajax({
            url: "/Home/GetUserChartData", success: function (result) {
                $(result).each(function (index) {
                    myUserChartLabels.push(result[index].key);
                    myUserChartValues.push(result[index].value);
                    myUserChartColores.push(result[index].color);
                });
                var userTypeChart = new Chart(userTypeCanvas, {
                type: 'pie',
                    data: {
                        labels: myUserChartLabels,
                        datasets: [{
                label: '# of Votes',
                            data: myUserChartValues,
                            backgroundColor: myUserChartColores
                        }]
                    },
                    options: {

            }
                });
            }
        });


      

    </script>    

}


